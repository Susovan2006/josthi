<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Title -->
  <title>Plan and Pricing | Josthi.com</title>

  <!--  ======================== CSS INCLUDES ===================== -->	
  <div th:replace="user_common :: includes"></div>
  <!--  ======================== CSS INCLUDES ===================== -->	
  
  <Style>
	  table {
		table-layout: fixed;
		word-wrap: break-word;
		margin-top:auto;
		margin-bottom:auto;
	}
	.text-sm {
		font-size: 12px;
	}
	.price {
		font-size: 1.5em;
	}
	
	.border-top-table{
		border-top: 0.0625rem solid #1e2022;
	}
  </Style>
  
</head>
<body>
  

  <!-- ========== MAIN ========== -->
  <main id="content" role="main" class="bg-light">
    <!-- Breadcrumb Section -->
    <div class="bg-navy" style="background-image: url(../vendor/svg/components/abstract-shapes-17.svg);">
      <div class="container space-1 space-top-lg-2 space-bottom-lg-3">
        <div class="row align-items-center">
          <div class="col">
            <div class="d-none d-lg-block">
              <h1 class="h2 text-white">Plan Subscription</h1>
            </div>

            <!-- Breadcrumb -->
            <ol class="breadcrumb breadcrumb-light breadcrumb-no-gutter mb-0">
              <li class="breadcrumb-item">Plan and Service</li>
              <li class="breadcrumb-item active" aria-current="page">Plan Subscription</li>
            </ol>
            <!-- End Breadcrumb -->
          </div>

          <!-- ===================== Log out ==================== -->
		  <div th:replace="user_common :: user-logout"></div>
		  <!-- ===================== Log out ==================== -->
        </div>
      </div>
    </div>
    <!-- End Breadcrumb Section -->

    <!-- Content Section -->
    <div class="container space-1 space-top-lg-0 mt-lg-n10">
      <div class="row">
        <div class="col-lg-3">
          <!-- Navbar -->
          <!--  ======================== USER NAVIGATION STARTS HERE =============================== -->
		    <div th:insert="user_common :: user-navigation-menu"></div>
          <!--  ======================== USER NAVIGATION END HERE ================================== -->
          <!-- End Navbar -->
        </div>

        <div class="col-lg-9">
		
		
		<!-- CARD 1 -->
		
		<div class="card mb-3 mb-lg-5">
            <!-- Header -->
            <div class="card-header">
              <h5 class="card-header-title">Your Current Plan</h5>

            </div>
            <!-- End Header -->

            <!-- Body -->
            <div class="card-body">
              <div class="row" th:if="${not #lists.isEmpty(registeredPlanList)}">
                <div class="col-md-4" th:each="registeredPlan : ${registeredPlanList}">
                    <div class="card">
                    	<div th:if="${registeredPlan.planName == 'Gold Plan'} ">
                    		<img class="card-img-top" src="/goldPlan" alt="Plan Type">
						</div>
						<div th:if="${registeredPlan.planName == 'Silver Plan'} ">
							<img class="card-img-top" src="/silverPlan" alt="Plan Type">
						</div>
						<div th:if="${registeredPlan.planName == 'Basic Plan'} ">
							<img class="card-img-top" src="/basicPlan" alt="Plan Type">
						</div>
				      
				      <div class="card-body">
				         <h5 class="card-title" th:text="${registeredPlan.planName}">Silver Plan</h5>
				            <ul class="list-checked list-checked-primary list-unstyled-py-2">
							  <li class="list-checked-item font-size-1 text-navy" th:text="${registeredPlan.breakupRequestedFor}">Sayani Gumtya, Aarish Gumtya</li>
							  <li class="list-checked-item font-size-1 text-navy" th:text="'Start :'+${registeredPlan.planStartDateStr}">Start : 1st Jan 2020</li>
							  <li class="list-checked-item font-size-1 text-navy" th:text="'Expires : '+${registeredPlan.planEndDateStr}">End : 1st Jan 2022</li>
							  <li class="list-checked-item font-size-1 text-navy" th:text="'Paid : '+${registeredPlan.finalDiscountedPrice} +'&#8377'">End : 1st Jan 2022</li>
							</ul>
				        <p class="card-text"><small th:text="${registeredPlan.planComments}"
				        			th:classappend="${registeredPlan.planActive == 'Y'} ? text-muted : text-danger">Plan is still valid for 30 Days.</small></p>
				      </div>
				    </div>
				 </div>                
              </div>
              
              <!-- In case User is yet to Subscribe a Plan  -->
              <div th:unless="${not #lists.isEmpty(registeredPlanList)}">
					<p class="text-danger">You are yet to Subscribe any Plan, please go to the below section and select a proper Plan.</p>
			  </div>
              
            </div>
            <!-- End Body -->
          </div>
          <!-- End Card -->
		
		
		
		
		
		
          <!-- Card 2-->
          <div class="card mb-3 mb-lg-5">
            <div class="card-header">
              <div class="d-flex align-items-center">
                <h5 class="card-title">Want to update your Plan.</h5>
                <span class="badge badge-soft-danger ml-2"></span>
              </div>
            </div>

            <!-- Body -->
            <div class="card-body">
            
            
                <input type="hidden" th:value="${session.USER_SESSION_OBJ_KEY.customerId}"  id="sessionCustomerId">
            

            	<!-- ################################################################################################################ -->
				<!-- #######################				A L E R T   S E C T I O N 		 				######################### -->
				<!-- ################################################################################################################ -->
	            <div th:if="${status ne null}">
		            <div class="alert alert-dismissible fade show" role="alert" th:classappend="${status == 'Success'} ? alert-success : alert-warning">
					  <strong><span th:text="${status}"></span>:</strong> <span th:text="${message}"></span>
					  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
					    <svg aria-hidden="true" class="mb-0" width="14" height="14" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
					      <path fill="currentColor" d="M11.5,9.5l5-5c0.2-0.2,0.2-0.6-0.1-0.9l-1-1c-0.3-0.3-0.7-0.3-0.9-0.1l-5,5l-5-5C4.3,2.3,3.9,2.4,3.6,2.6l-1,1 C2.4,3.9,2.3,4.3,2.5,4.5l5,5l-5,5c-0.2,0.2-0.2,0.6,0.1,0.9l1,1c0.3,0.3,0.7,0.3,0.9,0.1l5-5l5,5c0.2,0.2,0.6,0.2,0.9-0.1l1-1 c0.3-0.3,0.3-0.7,0.1-0.9L11.5,9.5z"/>
					    </svg>
					  </button>
					</div>
				</div>
				<!-- Alert Section End-->
				
				<!-- ################################################################################################################ -->
				<!-- #######################					S T E P     F O R M			 				######################### -->
				<!-- ################################################################################################################ -->
				<!-- Step Form -->
				<form class="js-step-form js-validate"
					  data-hs-step-form-options='{
						"progressSelector": "#advancedFormStepFormProgress",
						"stepsSelector": "#advancedFormStepFormContent",
						"isValidate": true
					  }' id= "buyAPlanForm" th:action="@{/user/buyPlan/{custId}(custId=${session.USER_SESSION_OBJ_KEY.customerId})}" 
			  											              				th:object="${planSubscriptionForUserBean}"  method="post">
			  											              				
			  	 <!-- These fields will be populated by JavaScript / Ajax -->
				<input type="hidden" th:field="*{calculatedPrice}"  id="hiddenPrice">
				<input type="hidden" th:field="*{offerId}"  id="hiddenOfferId">
				
				<div class="row">
				<div class="col-lg-3">
				  <!-- Step -->
				  <ul id="advancedFormStepFormProgress" class="js-step-progress step step-border-last-0">
					<li class="step-item">
					  <div class="step-content-wrapper">
						<span class="step-icon step-icon-soft-primary">        
							<i class="fas fa-ambulance"></i>
						</span>
						<div class="step-content">
						  <span class="step-inline-title">Plan</span>
						</div>
					  </div>
					</li>
					
					<li class="step-item">
					  <div class="step-content-wrapper">
						<span class="step-icon step-icon-soft-primary">        
							<i class="fas fa-clock"></i>
						</span>
						<div class="step-content">
						  <span class="step-inline-title">Duration</span>
						</div>
					  </div>
					</li>

					<li class="step-item">
					  <div class="step-content-wrapper">
						<span class="step-icon step-icon-soft-primary">
							<i class="fas fa-users"></i>
						</span>
						<div class="step-content">
						  <span class="step-inline-title">Beneficiary</span>
						</div>
					  </div>
					</li>

					<li class="step-item">
					  <div class="step-content-wrapper">
						<span class="step-icon step-icon-soft-primary">
							<i class="fas fa-check"></i>
						</span>
						<div class="step-content">
						  <span class="step-inline-title">Review</span>
						</div>
					  </div>
					</li>

					<li class="step-item">
					  <div class="step-content-wrapper">
						<span class="step-icon step-icon-soft-primary">
							<i class="fas fa-credit-card"></i>
						</span>
						<div class="step-content">
						  <span class="step-inline-title">Payment</span>
						</div>
					  </div>
					</li>
				  </ul>
				  <!-- End Step -->
				  </div>
				  
				  <div class="col-lg-9">
				  <!-- Content Step Form -->
				  <div id="advancedFormStepFormContent" class="border rounded p-4">
					<div id="advancedFormSelectStepOne" class="active">
					  
					<!-- Pricing Section -->
					<div class="container space-0">
					  <h4 class="mb-3">Available plans, Select one of them</h4>
					  
					  <div th:if="${not #lists.isEmpty(planSelectionForUserBeanList)}" class="table_wrapper">
					  
					  <!-- Pricing -->
					  <div th:each="planSelectionForUserBean : ${planSelectionForUserBeanList}" 
					  					class="custom-control custom-radio custom-control-inline checkbox-outline checkbox-icon w-100">
					  					
						<input type="radio"  th:field="*{planID}" th:value="${planSelectionForUserBean.planId}" th:id="'pricingRadio'+${planSelectionForUserBean.planId}"
							name="pricingRadio1" class="custom-control-input checkbox-outline-input checkbox-icon-input"
							required data-msg="This is a required field">
						<label class="checkbox-outline-label checkbox-icon-label w-100 rounded p-2" th:attr="for='pricingRadio'+${planSelectionForUserBean.planId}">
						  <span class="row">
							<span class="col-sm-3 order-sm-2 text-sm-right mb-3 mb-sm-0">
							  <span class="d-block mb-2">
								<span class="text-primary font-weight-bold align-top"></span>
								<span class="font-size-2 text-primary font-weight-bold" th:text="${planSelectionForUserBean.planActualPriceOneMonthSingle}+'&#8377'">25</span>
								<span class="font-size-1">/ mo</span>
							  </span>
							</span>
							<span class="col-sm-9 order-sm-1">
							  <span class="d-block h3 mb-1" th:text="${planSelectionForUserBean.planName}">Basic</span>
							  
							  <div>
									  <span class="d-block font-size-1" th:text="${planSelectionForUserBean.planDesc}">Plan Desc</span>	

									  <!-- <div class="collapse" id="collapseLinkBasic">
										<span class="d-block font-size-1">Monthly Charge.</span>
									  </div> -->
									  
									  <div class="collapse" th:id="'collapseLink'+${planSelectionForUserBean.planId}">
										<BR>
										<span class="d-block font-size-1 text-success">Plan Charge.</span>
										<table>
										  <thead class="thead-light">
											<tr>											  
											  <th scope="col" class="font-size-1">Duration</th>
											  <th scope="col" class="font-size-1">Price</th>
											  <th scope="col" class="font-size-1"></th>
											  
											</tr>
										  </thead>
										  <tbody>
											<tr>
											  <td class="border-top-table">
												<span class="font-size-sm" style="padding-right:50px;">30 Days Plan</span>
											  </td>
											  <td class="border-top-table">												
													<span class="font-size-sm text-body" th:text="${planSelectionForUserBean.planActualPriceOneMonthSingle}+'&#8377'">1000</span>
											  </td >
											  <td class="border-top-table">
												<span class="font-size-sm text-body" ></span>
											  </td>									 
											</tr>
											<tr>
											  <td class="border-top-table">
												<span class="font-size-sm" style="padding-right:50px;">90 Days Plan</span>
											  </td>
											  <td class="border-top-table">												
													<del class="text-danger"><span class="font-size-sm text-danger" th:text="${planSelectionForUserBean.planActualPriceThreeMonthSingle}+'&#8377'"></span></del>
											  </td>
											  <td class="border-top-table">
												<span class="font-size-sm text-body" th:text="${planSelectionForUserBean.planDiscountedPriceThreeMonthSingle}+'&#8377'">700/-</span>
											  </td>									 
											</tr>
											<tr>
											  <td class="border-top-table">
												<span class="font-size-sm" style="padding-right:50px;">180 Days Plan</span>
											  </td>
											  <td class="border-top-table">												
													<del class="text-danger"><span class="font-size-sm text-danger" th:text="${planSelectionForUserBean.planActualPriceSixMonthSingle}+'&#8377'">1000/-</span></del>
											  </td>
											  <td class="border-top-table">
												<span class="font-size-sm text-body" th:text="${planSelectionForUserBean.planDiscountedPriceSixMonthSingle}+'&#8377'">700/-</span>
											  </td>									 
											</tr>
											<tr>
											  <td class="border-top-table">
												<span class="font-size-sm" style="padding-right:50px;">1 Year Plan</span>
											  </td>
											  <td class="border-top-table">												
													<del class="text-danger"><span class="font-size-sm text-danger" th:text="${planSelectionForUserBean.planActualPriceTwelveMonthSingle}+'&#8377'">1000/-</span></del>
											  </td>
											  <td class="border-top-table">
												<span class="font-size-sm text-body" th:text="${planSelectionForUserBean.planDiscountedPriceTwelveMonthSingle}+'&#8377'">700/-</span>
											  </td>									 
											</tr>											
										  </tbody>
										</table>
									  </div>
									  <a class="link-collapse" data-toggle="collapse" th:attr="href='#collapseLink'+${planSelectionForUserBean.planId}" role="button" 
									      aria-expanded="false"  aria-controls="collapseLinkExample">
										<span class="link-collapse-default font-size-1">View Price breakup</span>
										<span class="link-collapse-active font-size-1">Hide</span>
									  </a>
								</div>
							</span>
						  </span>
						</label>
						</div>
						<!-- ELSE BLOCK IN CASE NO BENEFECIARY SELECTED -->
						<div th:unless="${not #lists.isEmpty(planSelectionForUserBeanList)}">
							<p class="card-text">Exception Occurred while pulling the data, please logout and re-login.</p>
						</div>
					  </div>
					  <!-- End Pricing -->

					  <!-- Pricing -->
					  <!-- <div class="custom-control custom-radio custom-control-inline checkbox-outline checkbox-icon w-100">
						<input type="radio" id="pricingRadio2" name="pricingRadio1" class="custom-control-input checkbox-outline-input checkbox-icon-input">
						<label class="checkbox-outline-label checkbox-icon-label w-100 rounded p-2" for="pricingRadio2">
						  <span class="row">
							<span class="col-sm-3 order-sm-2 text-sm-right mb-3 mb-sm-0">
							  <span class="d-block mb-2">
								<span class="text-primary font-weight-bold align-top">$</span>
								<span class="font-size-3 text-primary font-weight-bold">44</span>
								<span class="font-size-1">/ mo</span>
							  </span>
							</span>
							<span class="col-sm-9 order-sm-1">
							  <span class="d-block h3 mb-1">Silver</span>							  						  
								  <div>
									  <span class="d-block font-size-1">Plan for double Beneficiaries, With essential services.</span>	

									  <div class="collapse" id="collapseLinkSilver">
										<span class="d-block font-size-1">Monthly Charge.</span>
									  </div>

									  <a class="link-collapse" data-toggle="collapse" href="#collapseLinkSilver" role="button" aria-expanded="false" aria-controls="collapseLinkExample">
										<span class="link-collapse-default font-size-1">View Price breakup</span>
										<span class="link-collapse-active font-size-1">Hide</span>
									  </a>
								</div>
							</span>
						  </span>
						</label>
					  </div> -->
					  <!-- End Pricing -->

					  <!-- Pricing -->
					  <!-- <div class="custom-control custom-radio custom-control-inline checkbox-outline checkbox-icon w-100">
						<input type="radio" id="pricingRadio3" name="pricingRadio1" class="custom-control-input checkbox-outline-input checkbox-icon-input">
						<label class="checkbox-outline-label checkbox-icon-label w-100 rounded p-2" for="pricingRadio3">
						  <span class="row">
							<span class="col-sm-3 order-sm-2 text-sm-right mb-3 mb-sm-0">
							  <span class="d-block mb-2">
								<span class="text-primary font-weight-bold align-top">$</span>
								<span class="font-size-3 text-primary font-weight-bold">99</span>
								<span class="font-size-1">/ mo</span>
							  </span>
							</span>
							<span class="col-sm-9 order-sm-1">
							  <span class="d-block h3 mb-1">Gold</span>
							  	<div>
									  <span class="d-block font-size-1">Enjoy all the facility available.</span>	

									  <div class="collapse" id="collapseLinkGold">
										<span class="d-block font-size-1">Monthly Charge.</span>
									  </div>

									  <a class="link-collapse" data-toggle="collapse" href="#collapseLinkGold" role="button" aria-expanded="false" aria-controls="collapseLinkExample">
										<span class="link-collapse-default font-size-1">View Price breakup</span>
										<span class="link-collapse-active font-size-1">Hide</span>
									  </a>
								</div>
							</span>
						  </span>
						</label>
					  </div> -->
					  <!-- End Pricing -->

					  <div class="text-center mt-5">
						<div class="mb-5">
						  <p class="font-size-1">Need customised Plan? <a class="font-weight-bold" href="#">Contact us for custom pricing</a></p>
						</div>
					  </div>
					</div>
					<!-- End Pricing Section -->
					  

					  <div class="d-flex justify-content-end">
						<button type="button" class="btn btn-sm btn-primary transition-3d-hover mr-1"
								data-hs-step-form-next-options='{
								  "targetSelector": "#advancedFormSelectStepTwo"
								}'>Next</button>
					  </div>
					</div>

					<div id="advancedFormSelectStepTwo" style="display: none;">
					  <!-- Input Group -->
					  <div class="mb-4">
						  <div class="form-group js-form-message">
							<label class="input-label" for="selectedPlanFor">Is this Plan for a Single beneficiary or a Family (Max 3 Person)</label>
							<div class="input-group input-group-sm">						  
								<select th:field="*{beneficiaryCount}" id="selectedPlanFor" class="form-control" name="selectedPlanFor"  
												required data-msg="Select beneficiary type, the plice will vary based on the selection.">										
									
									<!-- <option>Single Beneficiary</option>
									<option>family Plan (2 Pserson)</option>
									<option>family Plan (3 Pserson)</option> -->
									<option th:each="planType : ${planTypeList}"
                             					th:value="${planType.keyId}"
                             					th:text="${planType.value}" />
								</select>
							
							</div>
						  </div>
					  </div>
					  <!-- End Input Group -->

					  <!-- Input Group -->
					  <div class="mb-4">
						<div class="form-group js-form-message">
							<label class="input-label" for="planDuration">Last name</label>
							<div class="input-group input-group-sm">
							  <select th:field="*{planDuration}" id="planDuration" class="form-control" name="planDuration"  
												required data-msg="Select the duration of the Plan, Better to go with yearly Plan and save more!!.">										
									<!-- <option>Monthly (30 Days)</option>
									<option>For 3 Months (60 Days)</option>
									<option>For 6 Months (180 Days)</option>
									<option>For 1 Year (365 Days)</option> -->
									<option th:each="planDuration : ${planDurationList}"
                             					th:value="${planDuration.keyId}"
                             					th:text="${planDuration.value}" />
									
								</select>
							</div>
						</div>
					  </div>
					  <!-- End Input Group -->

					  <!-- Input Group -->
					  <div class="mb-4">
						  <div class="form-group js-form-message">
							<label class="input-label" for="sameLocationConfirmation">Please confirm the family members are staying in the same location?</label>
							<div class="input-group input-group-sm">
							  <select id="sameLocationConfirmation" class="form-control" name="sameLocationConfirmation"  
												required data-msg="If the family members are not staying in the same location, the plan will be void.">										
									<option>disagree</option>
									<option>I Agree, the family members are residing in same address.</option>
								</select>
							</div>
						  </div>
					  </div>
					  <!-- End Input Group -->

					  <div class="d-flex justify-content-end">
						<a class="btn btn-sm btn-soft-secondary transition-3d-hover mr-1" href="javascript:;"
						   data-hs-step-form-prev-options='{
							 "targetSelector": "#advancedFormSelectStepOne"
						   }'>Back</a>
						<button type="button" class="btn btn-sm btn-primary transition-3d-hover"
								data-hs-step-form-next-options='{
								  "targetSelector": "#advancedFormSelectStepThree"
								}'>Next</button>
					  </div>
					</div>

					<div id="advancedFormSelectStepThree" style="display: none;">
					  <!-- Input Group -->
					  <div class="row"> 
							<div class="subject-info-box-1 col-sm-5">
							   <select multiple="multiple" id='lstBox1' class="form-control">
								<!-- <option value="Susovan Gumtya">Susovan Gumtya</option>
								<option value="Sayani Gumtya">Sayani Gumtya</option>
								<option value="Bhabani Gumtya">Bhabani Gumtya</option> -->
								
								<option th:each="beneficiary : ${beneficiaryList}"
                             					th:value="${beneficiary.keyId}"
                             					th:text="${beneficiary.value}" />
							  </select> 
							  
							</div>

							<div class="subject-info-arrows text-center col-sm-2">
							  <!-- There will be max 3 Beneficiary, so no need to have Move all Option -->
							  <!-- <button type="button" id='btnAllRight' class="btn btn-soft-primary btn-icon btn-xs">
							  <i class="fas fa-forward"></i>
							  </button>
							  </br> -->
							  <button type="button" id='btnRight' class="btn btn-soft-primary btn-icon btn-xs">
							  <i class="fas fa-chevron-right"></i>
							  </button>
							  </br>
							  <button type="button" id='btnLeft' class="btn btn-soft-primary btn-icon btn-xs">
							  <i class="fas fa-chevron-left"></i>
							  </button>
							  </br>
							  <!-- Removing this Button just to reduce Confusion -->
							  <!-- <button type="button" id='btnAllLeft' class="btn btn-soft-primary btn-icon btn-xs">
								<i class="fas fa-backward"></i>
							  </button> -->
							</div>

							<div class="subject-info-box-2 col-sm-5">
								<div class="form-group js-form-message">
							  <select th:field="*{beneficiaryIdArr}" multiple="multiple" id='lstBox2' class="form-control"
							  	required data-msg="You can't proceed without any Beneficiary, Please select the Beneficiary.">
								<!-- Initially This is Blank-->
							  </select>
							  </div>
							</div>

							
						</div> 
					  <!-- End Input Group -->
						</br>
						</br>
						</br>
					  <div class="d-flex justify-content-end">
						<a class="btn btn-sm btn-soft-secondary transition-3d-hover mr-1" href="javascript:;"
						   data-hs-step-form-prev-options='{
							 "targetSelector": "#advancedFormSelectStepTwo"
						   }'>Back</a>
						<button type="button" onclick="reviewPlanData();" class="btn btn-sm btn-primary transition-3d-hover"
								data-hs-step-form-next-options='{
								  "targetSelector": "#advancedFormSelectStepFour"
								}'>Next</button>
					  </div>
					</div>
					
					
					<div id="advancedFormSelectStepFour" style="display: none;">
					  <!-- Input Group -->
							<div class="row"> 
							<div class="col-sm-4">
								<div class="form-group js-form-message">
								  <label id="serviceCategoryLbl" class="input-label">Plan Name:</label>
								  <p id="divPlanNameToReview" class="font-size-1 text-primary">Gold</p>
								</div>
							</div>
							
							<div class="col-sm-5">
								<div class="form-group js-form-message">
								  <label class="input-label">Plan Covers:</label>
								  <p class="font-size-1 text-primary" id="divPlanTypeOnBeneficiaryCount">Family Plan(2) Members</p>
								</div>
							</div>
							
							<div class="col-sm-3">
								<div class="form-group js-form-message">
								  <label class="input-label">Plan Valid For:</label>
								  <p  class="font-size-1 text-primary" id="divPlanDurationToReview">90 days</p>
								</div>
							</div>
							
						 
						</div>
						<!-- ROW 2 -->
						<div class="row"> 
							<div class="col-sm-4">
								<div class="form-group js-form-message">
								  <label class="input-label">Plan Start Date:</label>
								  <p class="font-size-1 text-primary" id="divPlanStartDate">Jan 1 2021</p>
								</div>
							</div>
							
							<div class="col-sm-5">
								<div class="form-group js-form-message">
								  <label class="input-label">Plan Expire Date:</label>
								  <p class="font-size-1 text-primary" id="divPlanExpireDate">March 30 2021</p>
								</div>
							</div>
							
							<div class="col-sm-3">
								<div class="form-group js-form-message">
								  <label class="input-label">Plan Price:</label>
								  <p class="font-size-1 text-primary" id="divFinalPriceToPay">90$</p>
								</div>
							</div>
						</div>
						<!-- ROW 3 -->
						<div class="row"> 
							<div class="col-sm-4">
								<div class="form-group js-form-message">
								  <label class="input-label">Primary Beneficiary:</label>
								  <p id="firstBeneficiary" class="font-size-1 text-primary">Susovan Gumtya</p>
								</div>
							</div>
							
							<div class="col-sm-4">
								<div class="form-group js-form-message">
								  <label class="input-label">Secondary Beneficiary:</label>
								  <p id="secondBeneficiary" class="font-size-1 text-primary">Sayani Gumtya</p>
								</div>
							</div>
							
							<div class="col-sm-4">
								<div class="form-group js-form-message">
								  <label class="input-label">Additional Beneficiary :</label>
								  <p id="thirdBeneficiary" class="font-size-1 text-primary">NA</p>
								</div>
							</div>
						</div>
						
						<!-- ROW 4 -->
						<div class="row">                				  
						  <div class="col-sm-12">
							<div class="form-group js-form-message">
							  <label class="input-label">Price Breakup</label>
							  <p id="descriptionId" class="font-size-1 text-primary"></p>
							  
							  		<table>
										  <thead class="thead-light">
											<tr>											  
											  <th scope="col" class="font-size-1">Duration</th>
											  <th scope="col" class="font-size-1">Price</th>
											  <th scope="col" class="font-size-1"></th>
											  
											</tr>
										  </thead>
										  <tbody>
											<tr>
											  <td class="border-top-table">
												<span id="divPlanName" class="font-size-sm" style="padding-right:50px;">Plan Name</span>
											  </td>
											  <td class="border-top-table">												
													<span id="divUnitPrice" class="font-size-sm text-body">Price Per Person , Per Month (Unit Price)</span>
											  </td >
											  <td class="border-top-table">
												<span class="font-size-sm text-body" ></span>
											  </td>									 
											</tr>
											<tr>
											  <td class="border-top-table">
												<span id="divBeneficiaryCount" class="font-size-sm" style="padding-right:50px;">No of Beneficiary</span>
											  </td>
											  <td class="border-top-table">												
													<del class="text-danger"><span id="divBasePriceForTotalBeneficiary" class="font-size-sm text-danger">(Unit Price) X Beneficiary Count</span></del>
											  </td>
											  <td class="border-top-table">
												<span class="font-size-sm text-body" id="divDiscountedPriceForTotalBeneficiary">Beneficiary Count Discount</span>
											  </td>									 
											</tr>
											<tr>
											  <td class="border-top-table">
												<span class="font-size-sm" style="padding-right:50px;" id="divPlanDuration">Discounted on Duration</span>
											  </td>
											  <td class="border-top-table">												
													<del class="text-danger"><span class="font-size-sm text-danger" id= "divBasePriceForSelectedDuration">Beneficiary Discounted X no of months</span></del>
											  </td>
											  <td class="border-top-table">
												<span class="font-size-sm text-body" id="divDiscountedPriceForSelectedDuration">Final Discounted Price</span>
											  </td>									 
											</tr>
											<tr>
											  <td class="border-top-table">
												<span class="font-size-sm" style="padding-right:50px;">Savings</span>
											  </td>
											  <td class="border-top-table">												
													<del class="text-danger"><span class="font-size-sm text-danger" id="divActualPlanPrice">Actual Price</span></del>
											  </td>
											  <td class="border-top-table">
												<span class="font-size-sm text-body" id="divTotalGain">Final Discounted Price (XXX% Off!!)</span>
											  </td>									 
											</tr>											
										  </tbody>
										</table>
							  
							  
							  
							</div>
						  </div>
						 </div>						 
						 </BR>
					  <!-- End Input Group -->

					  <div class="d-flex justify-content-end">
						<a class="btn btn-sm btn-soft-secondary transition-3d-hover mr-1" href="javascript:;"
						   data-hs-step-form-prev-options='{
							 "targetSelector": "#advancedFormSelectStepThree"
						   }'>Back</a>
						<button type="button" onclick="submitRequestForm()" class="btn btn-sm btn-primary transition-3d-hover"
								data-hs-step-form-next-options='{
								  "targetSelector": "#advancedFormSelectStepFive"
								}'>Confirm And Pay</button>
					  </div>
					</div>

					<div id="advancedFormSelectStepFive" style="display: none;">
					  You have successfully enrolled the Plan!

					  <div class="d-flex justify-content-end">
						<a class="btn btn-sm btn-soft-secondary transition-3d-hover mr-1" href="javascript:;"
						   data-hs-step-form-prev-options='{
							 "targetSelector": "#advancedFormSelectStepFour"
						   }'>Back</a>
						<button type="button" class="btn btn-sm btn-primary transition-3d-hover">Done</button>
					  </div>
					</div>
				  </div>
				  <!-- End Content Step Form -->
				</div>
				</div>
				</form>
				<!-- End Step Form -->
				

            </div>
            <!-- End Body -->
          </div>
          <!-- End Card -->
		  
		  
		  
		  <!-- Card 2-->
          <div class="card mb-3 mb-lg-5">
            <div class="card-header">
              <div class="d-flex align-items-center">
                <h5 class="card-title">Compare your Plans</h5>
                <span class="badge badge-soft-danger ml-2"></span>
              </div>
            </div>

            <!-- Body -->
            <div class="card-body">
				
				
				<table class="table table-hover table-bordered" style="text-align:center;padding-left:200px; padding-right:200px;">
						<col style="width:40%">
						<col style="width:20%">
						<col style="width:20%">
						<col style="width:20%">
					
					
					<thead>
					  <tr class="active">
						  <th style="background:#fff"></th>
						  <th><center><h3>Basic</h3><p class="text-muted text-sm">Stater Plan.</p></center></th>
						  <th><center><h3>Silver</h3><p class="text-muted text-sm">Essential services.</p></center></th>
						  <th><center><h3>Gold</h3><p class="text-muted text-sm">Eessential & Value added services.</p></center></th>
					  </tr>
					</thead>
					<tbody>
					  <tr>
						<td><br />Price</td>
						<td><h3 class="panel-title price">$399</h3></td>
						<td><h3 class="panel-title price">$699</h3></td>
						<td><h3 class="panel-title price">$799</h3></td>
					  </tr>
					  <tr>
						<td colspan="4" align="left" style="padding-left:20px;" class="active"><b>Service and Features</b></td>
					  </tr>
					  <tr>
						<td>Plan available for</td>
						<td>Single/Family</td>
						<td>Single/Family</td>
						<td>Single/Family</td>

					  </tr>
					 <div th:if="${not #lists.isEmpty(planAndBenefitBeanList)}">
						 <tr th:each="planAndBenefitBean : ${planAndBenefitBeanList}">
						 
							<td th:text="${planAndBenefitBean.serviceName}" th:id="${planAndBenefitBean.serviceCode}"
							data-toggle="tooltip" data-placement="left" th:attr="title=${planAndBenefitBean.serviceDescription}" title="Service Details">Service</td>
							<!-- Basic Plan -->
							<td>
								<div th:if="${planAndBenefitBean.serviceCoveredByBasic == 'Y'} ">									
									<i style="color:limegreen" class="fa fa-check fa-lg" 
									data-toggle="tooltip" data-placement="top" th:attr="title='Disclaimer : '+${planAndBenefitBean.serviceDisclaimer}" 
									title="Service Disclaimer"></i>
								</div>
								<div th:unless="${planAndBenefitBean.serviceCoveredByBasic == 'Y'}">
									<i style="color:red" class="fa fa-ban fa-lg"></i>
								</div>
							</td>
							<!-- Silver Plan -->
							<td>
								<div th:if="${planAndBenefitBean.serviceCoveredBySilver == 'Y'} ">									
									<i style="color:limegreen" class="fa fa-check fa-lg" 
									data-toggle="tooltip" data-placement="top" th:attr="title='Disclaimer : '+${planAndBenefitBean.serviceDisclaimer}" 
									title="Service Disclaimer"></i>
								</div>
								<div th:unless="${planAndBenefitBean.serviceCoveredBySilver == 'Y'}">
									<i style="color:red" class="fa fa-ban fa-lg"></i>
								</div>
							</td>
							
							<!-- Gold Plan -->
							<td>
								<div th:if="${planAndBenefitBean.serviceCoveredByGold == 'Y'} ">									
									<i style="color:limegreen" class="fa fa-check fa-lg" 
									data-toggle="tooltip" data-placement="top" th:attr="title='Disclaimer : '+${planAndBenefitBean.serviceDisclaimer}" 
									title="Service Disclaimer"></i>
								</div>
								<div th:unless="${planAndBenefitBean.serviceCoveredByGold == 'Y'}">
									<i style="color:red" class="fa fa-ban fa-lg"></i>
								</div>
							</td>
						  </tr>
					  </div>
					  <tr>
						<td>Customer Rating</td>
						<td>A</td>
						<td>A+</td>
						<td>A++</td>
					  </tr>
					  
						<!--<tr><td></td>
						<td><a class="btn btn-info" style="margin-top:10px; margin-bottom:10px">Order Now</a></td>
						<td><a class="btn btn-info" style="margin-top:10px; margin-bottom:10px">Order Now</a></td>
						<td><a class="btn btn-info" style="margin-top:10px; margin-bottom:10px">Order Now</a></td></tr> -->
					</tbody>
				  </table>
				
				
			
			</div>
            <!-- End Body -->
          </div>
          <!-- End Card -->

        </div>
        <!--end Of class="col-lg-9" -->
      </div>
      <!-- End Row -->
    </div>
    <!-- End Content Section -->
  </main>
  <!-- ========== END MAIN ========== -->

  <!-- ========== FOOTER ========== -->
  <div th:replace="user_common :: user-footer"></div>
  <!-- ========== END FOOTER ========== -->

  <!-- Go to Top -->
  <a class="js-go-to go-to position-fixed" href="javascript:;" style="visibility: hidden;"
     data-hs-go-to-options='{
       "offsetTop": 400,
       "position": {
         "init": {
           "right": 15
         },
         "show": {
           "bottom": 15
         },
         "hide": {
           "bottom": -15
         }
       }
     }'>
    <i class="fas fa-angle-up"></i>
  </a>
  <!-- End Go to Top -->

  <!-- ========== JAVA SCRIPT INCLUDE START ========== -->
  <div th:insert="user_common :: js-includes"></div>
  <script th:src="@{/vendor/hs-step-form/dist/hs-step-form.min.js}"></script>
  <!-- ========== END JAVA SCRIPT INCLUDE ========== -->
  
  <script>
    $(document).on('ready', function () {
    	
    	
    var element = document.getElementById("userSubscribePlanLink");
    element.classList.add("active");
	  
      //Step form - Susovan
	  $('.js-step-form').each(function () {
		  var stepForm = new HSStepForm($(this)).init();
	   });
    	  
      // initialization of header
      var header = new HSHeader($('#header')).init();

      // initialization of mega menu
      var megaMenu = new HSMegaMenu($('.js-mega-menu'), {
        desktop: {
          position: 'left'
        }
      }).init();

      // initialization of unfold
      var unfold = new HSUnfold('.js-hs-unfold-invoker').init();

      // initialization of form validation
      $('.js-validate').each(function() {
        $.HSCore.components.HSValidation.init($(this), {
          rules: {
            confirmNewPassword: {
              equalTo: '#newPassword'
            }
          }
        });
      });

      // initialization of show animations
      $('.js-animation-link').each(function () {
        var showAnimation = new HSShowAnimation($(this)).init();
      });

      // initialization of go to
      $('.js-go-to').each(function () {
        var goTo = new HSGoTo($(this)).init();
      });
    });
  </script>
  
    <!-- Script to move Beneficiary to Plan -->
    <!-- https://stackoverflow.com/questions/14001924/jquery-moving-all-items-in-listbox-at-once -->
    <Script>

	  (function () {
		  
	 /* Working
	 $("#btnRight").click(function (e) {
			    $('option[value="' + $('#lstBox2').val() + '"]').prop('selected','');
			    $("#lstBox2").append('<option value="' + $('#lstBox1').val() + '" selected>' + $('#lstBox1').val() + '</option>');
			    $("#lstBox1 option[value=" + $('#lstBox1').val() + "]").remove();
			}); */
		  
	  
		$("#btnRight").click(function (e) {		  
		var availableOpts = $("#lstBox1 option");
			if (availableOpts.length == 0) {
			  alert("No Beneficiary available to move to Plan.");
			  e.preventDefault();
		}
		  
		var selectedOpts = $("#lstBox1 option:selected");
		if (selectedOpts.length == 0) {
		  alert("Please Select atleast one Beneficiary to be added to Plan.");
		  e.preventDefault();
		}

		$("#lstBox2").append($(selectedOpts).clone());
		$(selectedOpts).remove();
		e.preventDefault();
	  });
		
	 // Make Sure all the Beneficiaries are selected.
	 $('#btnRight').click(function() {
			    $('#lstBox2 option').prop('selected', true);
	  });
	  
	  $("#btnLeft").click(function (e) {
		  
		    var selectedOpts = $("#lstBox2 option");
			if (selectedOpts.length == 0) {
			  alert("nothing to remove.");
			  e.preventDefault();
			}		  
		  
			var selectedOpts = $("#lstBox2 option:selected");
			if (selectedOpts.length == 0) {
			  alert("Please Select atleast one Beneficiary to be removed to Plan.");
			  e.preventDefault();
			}

			$("#lstBox1").append($(selectedOpts).clone());
			$(selectedOpts).remove();
			e.preventDefault();
	   });
	  

	  //This Method is No longer Needed, the button is commented out.
	  $("#btnAllRight").click(function (e) {
		var selectedOpts = $("#lstBox1 option");
		if (selectedOpts.length == 0) {
		  alert("No Beneficiary available to move to Plan.");
		  e.preventDefault();
		}

		$("#lstBox2").append($(selectedOpts).clone());
		$(selectedOpts).remove();
		e.preventDefault();
	  });


	  //This Method is No longer Needed, the button is commented out.
	  $("#btnAllLeft").click(function (e) {
		var selectedOpts = $("#lstBox2 option");
		if (selectedOpts.length == 0) {
		  alert("No Beneficiary added to Plan.. so nothing to remove.");
		  e.preventDefault();
		}

		$("#lstBox1").append($(selectedOpts).clone());
		$(selectedOpts).remove();
		e.preventDefault();
	  });
	  
	})(jQuery);
  
  </script>
  
  <!-- ###################### CUSTOM JAVA SCRIPT ####################### -->
  
  <Script>
	function submitRequestForm() {
		  document.getElementById("buyAPlanForm").submit();
		}
	
	function reviewPlanData() {
		$('#lstBox2 option').prop('selected', true);
		
		$('#firstBeneficiary').text('Not Assigned');
		$('#secondBeneficiary').text('Not Assigned');
		$('#thirdBeneficiary').text('Not Assigned');
		
		//Variables to be Passed
		var customerId = $( "#sessionCustomerId" ).val();
		var beneficiary1 = "";
		var beneficiary2 = "";
		var beneficiary3 = "";
		var selectedPlan = $("input[name='planID']:checked").val();
		var planDuration = $( "#planDuration option:selected" ).val();
		var beneficiaryCount = $( "#selectedPlanFor option:selected" ).val();
		
		var select = document.getElementById("lstBox2");
		  for (var i = 0; i < select.length; i++){
		    var option = select.options[i];
		    // now have option.text, option.value
		    if(i==0 && (beneficiaryCount == '1BEN' || beneficiaryCount == '2BEN' || beneficiaryCount == '3BEN')){
		    	$('#firstBeneficiary').text(option.text);
		    	beneficiary1 = option.value;
		    }
		    if(i==1 && (beneficiaryCount == '2BEN' || beneficiaryCount == '3BEN')){
		    	$('#secondBeneficiary').text(option.text);
		    	beneficiary2 = option.value;
		    }
		    if(i==2 && beneficiaryCount == '3BEN'){
		    	$('#thirdBeneficiary').text(option.text);
		    	beneficiary3 = option.value;
		    }
		  }
		 
		  console.log ("selectedPlan :"+selectedPlan);
		  console.log ("planDuration :"+planDuration);
		  console.log ("beneficiaryCount :"+beneficiaryCount);
		  
		  var formData = {
				    customerId : customerId,
				  	beneficiary1 : beneficiary1,
				  	beneficiary2 : beneficiary2,
				  	beneficiary3 : beneficiary3,
				  	selectedPlan : selectedPlan,
				  	planDuration : planDuration,
				  	beneficiaryCount : beneficiaryCount
			      }
	
			$.ajax({
				type: "POST",
				contentType : "application/json",
				url: "/getPlanAndPriceBreakupOnSelectedCriteria",
				data : JSON.stringify(formData),
				dataType: 'json', //Important , it has to be Json to get Json String Back
				cache: false,
				timeout: 600000,
				
				success: function (data, status) {
					console.log("SUCCESS : ", data);
											
					if(data.status == 'SUCCESS'){
						
						//document.getElementById("disclaimerId").innerHTML = data.disclaimer;
						
						//Setting the Hidden Field Values
						//document.getElementById("hiddenPriceInUsd").value = data.priceInUsd;
						
						$('#divPlanName').text(data.planName);
						$('#divUnitPrice').html(data.planPricePerPersonPerMonth+' &#8377/Head');
						$('#divBeneficiaryCount').html(data.beneficiaryCount);
						$('#divBasePriceForTotalBeneficiary').html(data.basePriceForTotalBeneficiary+'&#8377 ');
						$('#divDiscountedPriceForTotalBeneficiary').html(data.discountedPriceForTotalBeneficiary+'&#8377 ');
						$('#divPlanDuration').html(data.planDuration);
						$('#divBasePriceForSelectedDuration').html(data.basePriceForSelectedDuration+'&#8377 ');
						$('#divDiscountedPriceForSelectedDuration').html(data.discountedPriceForSelectedDuration+'&#8377 ');
						$('#divActualPlanPrice').html(data.actualPlanPrice+'&#8377 ');
						$('#divTotalGain').html(data.discountedPriceForSelectedDuration+'&#8377 '+data.totalGain);
						
						//Review Section
						$('#divPlanNameToReview').text(data.planName);
						$('#divPlanTypeOnBeneficiaryCount').text(data.beneficiaryCount);
						$('#divPlanDurationToReview').text(data.planDuration);
						$('#divPlanStartDate').text(data.planStartDateStr);
						$('#divPlanExpireDate').text(data.planEndDateStr)
						$('#divFinalPriceToPay').html(data.finalDiscountedPrice +'&#8377 ')
						
						//Setting the Servlet Fields...
						$("#hiddenPrice").val(data.finalDiscountedPrice);
						$("#hiddenOfferId").val(data.offerId);
						//alert(data.status);
							
					}else{
						console.log("ERROR : ", data.status + data.message);
						document.getElementById("chargeId").innerHTML = "Error Occured";
						document.getElementById("disclaimerId").innerHTML = "Processing Error Occured, Please try Later.";
						showErrorAlert("Error :"+data.message);
					}
				},
				error: function (xhr, status, error) {
					console.log("ERROR : ", xhr.status);
					console.log("ERROR status: ", status);
					console.log("ERROR error: ", error);
					document.getElementById("disclaimerId").innerHTML = "Processing Error Occured, Please try Later.";
					showErrorAlert("Error : Exception occured while getting the service Price details, if you still see the error, contact the customer service. Details:"+error);
					

				}
			});
		  
	}
  
  </Script>
  

  

  <!-- IE Support -->
  <script>
    if (/MSIE \d|Trident.*rv:/.test(navigator.userAgent)) document.write('<script src="../../assets/vendor/polifills.js"><\/script>');
  </script>
</body>
</html>
